{% extends "base.html" %}
{% block title %}Collaborators | DSAWebLectures{% endblock %}

{% block content %}
<main class="collaborators-page">
  <section class="collab-hero">
    <h2>Our Collaborators</h2>
    <p>Meet the brilliant minds behind DSAWebLectures.</p>
  </section>

  <section class="collab-grid">
    <button id="btn-lead-engineer" class="collab-btn">Lead Engineer</button>
    <button id="btn-senior-developer" class="collab-btn">Senior Developer</button>
    <button id="btn-junior-developer" class="collab-btn">Junior Developer</button>
    <button id="btn-db-engineer" class="collab-btn">DB Engineer</button>
    <button id="btn-graphics-designer" class="collab-btn">Graphics Designer</button>
    <button id="btn-manager" class="collab-btn">Manager</button>
  </section>

  <!-- Collaborator Modals -->
  <div id="collab-modals">
    {% set collaborators = [
      {'id':'lead-engineer','role':'Lead Engineer','name':'Earl Jhon D. Dimla','student_id':'2024-03779-MN-0','github':'Earl-cmyk'},
      {'id':'senior-developer','role':'Senior Developer','name':'Placeholder 2','student_id':'2024-00000-MN-2','github':'placeholder2'},
      {'id':'junior-developer','role':'Junior Developer','name':'Placeholder 3','student_id':'2024-00000-MN-3','github':'placeholder3'},
      {'id':'db-engineer','role':'DB Engineer','name':'Placeholder 4','student_id':'2024-00000-MN-4','github':'placeholder4'},
      {'id':'graphics-designer','role':'Graphics Designer','name':'Placeholder 5','student_id':'2024-00000-MN-5','github':'placeholder5'},
      {'id':'manager','role':'Manager','name':'Placeholder 6','student_id':'2024-00000-MN-6','github':'placeholder6'}
    ] %}
    {% for c in collaborators %}
    <div id="card-{{ c.id }}" class="collab-card modal" aria-hidden="true">
      <div class="modal-content">
        <img src="{{ url_for('static', filename='img/avatar_placeholder.png') }}" alt="Avatar" class="avatar" />
        <h3>{{ c.role }}</h3>
        <p><strong>Name:</strong> {{ c.name }}</p>
        <p><strong>Student ID:</strong> {{ c.student_id }}</p>
        <p><strong>GitHub:</strong> <a href="https://github.com/{{ c.github }}" target="_blank">{{ c.github }}</a></p>
        <button class="copy-btn" data-username="{{ c.github }}">Copy GitHub Username</button>
        <button class="close-btn">Close</button>
      </div>
    </div>
    {% endfor %}
  </div>
</main>
{% endblock %}

{% block scripts %}
<script>
  const buttons = [
    'lead-engineer','senior-developer','junior-developer',
    'db-engineer','graphics-designer','manager'
  ];

  buttons.forEach(id => {
    const trigger = document.getElementById(`btn-${id}`);
    const modal = document.getElementById(`card-${id}`);
    if (trigger && modal) {
      trigger.addEventListener('click', () => {
        modal.style.display = 'flex';
        modal.setAttribute('aria-hidden', 'false');
      });
      modal.querySelector('.close-btn').addEventListener('click', () => {
        modal.style.display = 'none';
        modal.setAttribute('aria-hidden', 'true');
      });
    }
  });

  // Copy GitHub username
  document.querySelectorAll('.copy-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      navigator.clipboard.writeText(btn.dataset.username).then(() => {
        alert(`Copied ${btn.dataset.username} to clipboard!`);
      });
    });
  });
</script>
{% endblock %}
